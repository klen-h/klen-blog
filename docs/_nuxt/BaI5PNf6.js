import V from"./DlX_lPuI.js";import{u as D,_ as E,a as H}from"./ucCoZGV5.js";import{N as M,d as S}from"./BWWIeFk8.js";import{x as j,u as F,r as u,p as x,f as P,c as n,a as t,b as g,h,g as p,i as e,t as m,d as y,F as f,j as b,y as w,o as a}from"#entry";import"./Bqt1dUAR.js";import"./DlAUqK2U.js";const A={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},I={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},R={key:1,class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden markdown-body"},q={class:"p-8 border-b border-gray-200 dark:border-gray-700"},z={class:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-6"},G={class:"flex flex-wrap items-center gap-4 text-sm text-gray-600 dark:text-gray-400 mb-4"},J={class:"flex items-center"},K={key:0,class:"flex items-center"},O={class:"flex flex-wrap gap-1"},Q={key:0,class:"text-m text-gray-600 dark:text-gray-300 italic border-l-4 border-primary-500 pl-4"},U={class:"p-8 pt-0"},W={class:"prose prose-lg max-w-none dark:prose-invert"},X=["innerHTML"],Y={class:"p-8 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700"},Z={class:"flex items-center justify-between"},ee={class:"space-x-4"},te={key:2,class:"mt-12"},se={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8"},oe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ge={__name:"[slug]",setup(re){const v=j().params.slug,{formatDate:k}=D();F({title:"文章详情 - 我的个人博客"});const s=u(null),C=u(!1),N=x(()=>S(s.value?.content||"")),$=async()=>{try{const r=(await $fetch("/api/posts")).find(i=>i.slug===v);if(r)s.value=r;else throw w({statusCode:404,message:"文章未找到"})}catch(o){throw console.error("加载文章失败:",o),w({statusCode:404,message:"文章未找到"})}},d=u([]),_=x(()=>!d.value||!s.value?[]:d.value.filter(o=>o.slug!==s.value.slug).slice(0,2)),B=()=>{navigator.clipboard.writeText(window.location.href).then(()=>{L("链接已复制到剪贴板")}).catch(o=>{console.error("复制失败:",o),T("复制失败")})},c=u({show:!1,message:"",type:"info"}),L=o=>{c.value={show:!0,message:o,type:"success"}},T=o=>{c.value={show:!0,message:o,type:"error"}};return P(async()=>{await $();try{d.value=await $fetch("/api/posts")}catch{d.value=[]}}),(o,r)=>{const i=V;return a(),n("div",A,[t("div",I,[e(C)?(a(),h(H,{key:0})):e(s)?(a(),n("article",R,[t("div",q,[t("h1",z,m(e(s).title),1),t("div",G,[t("div",J,[g(i,{name:"lucide:calendar",class:"w-4 h-4 mr-2"}),y(" "+m(e(k)(e(s).date||e(s).created_at)),1)]),e(s).tags&&e(s).tags.length>0?(a(),n("div",K,[g(i,{name:"lucide:tag",class:"w-4 h-4 mr-2 flex-shrink-0"}),t("div",O,[(a(!0),n(f,null,b(e(s).tags,l=>(a(),n("span",{key:l,class:"inline-block bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-full px-2 py-1 text-xs"},m(l),1))),128))])])):p("",!0)]),e(s).excerpt?(a(),n("div",Q,m(e(s).excerpt),1)):p("",!0)]),t("div",U,[t("div",W,[t("div",{innerHTML:e(N)},null,8,X)])]),t("div",Y,[t("div",Z,[r[2]||(r[2]=t("div",{class:"text-sm text-gray-600 dark:text-gray-400"},[t("p",null,"文章详情")],-1)),t("div",ee,[t("button",{onClick:B,class:"btn btn-sm btn-outline flex items-center"},[g(i,{name:"lucide:link",class:"w-4 h-4 mr-2"}),r[1]||(r[1]=y(" 复制链接 ",-1))])])])])])):p("",!0),e(s)&&e(_).length>0?(a(),n("div",te,[t("div",se,[r[3]||(r[3]=t("h3",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-6"}," 相关文章 ",-1)),t("div",oe,[(a(!0),n(f,null,b(e(_),l=>(a(),h(E,{key:l.slug||l.id,post:l},null,8,["post"]))),128))])])])):p("",!0)]),g(M,{show:e(c).show,message:e(c).message,type:e(c).type,onClose:r[0]||(r[0]=l=>e(c).show=!1)},null,8,["show","message","type"])])}}};export{ge as default};
